<% content_for :title, "Case Studies" %>

<div class="w-full">
  <% if notice.present? %>
    <div class="mb-6 py-3 px-4 bg-green-500/10 border border-green-500/20 text-green-400 rounded-lg">
      <%= notice %>
    </div>
  <% end %>

  <div class="flex justify-between items-center mb-6">
    <div>
      <h1 class="font-bold text-2xl text-white">Case Studies</h1>
      <p class="text-slate-400 text-sm mt-1">Portfolio items shown on homepage</p>
    </div>
    <%= link_to "New Case Study", new_admin_case_study_path, class: "px-5 py-3 bg-primary hover:bg-blue-600 text-white font-medium rounded-lg transition-colors" %>
  </div>

  <div class="space-y-4">
    <% if @case_studies.any? %>
      <% @case_studies.each do |study| %>
        <div class="bg-surface-dark rounded-xl border border-slate-700/50 p-6 flex gap-6">
          <% if study.cover_image.attached? %>
            <%= image_tag study.cover_image, class: "w-32 h-32 object-cover rounded-lg" %>
          <% else %>
            <div class="w-32 h-32 bg-slate-800 rounded-lg flex items-center justify-center">
              <span class="material-symbols-outlined text-slate-600 text-4xl">image</span>
            </div>
          <% end %>
          
          <div class="flex-1">
            <div class="flex items-start justify-between mb-2">
              <div>
                <h3 class="font-bold text-white text-lg"><%= study.title %></h3>
                <div class="flex gap-2 mt-1">
                  <span class="px-2 py-1 bg-slate-800 text-slate-300 text-xs font-medium rounded"><%= study.category %></span>
                  <span class="px-2 py-1 bg-<%= study.metric_color %>-500/10 text-<%= study.metric_color %>-400 text-xs font-medium rounded"><%= study.metric_label %></span>
                </div>
              </div>
              <% if study.enabled %>
                <span class="px-2 py-1 bg-green-500/10 text-green-400 text-xs font-medium rounded">Active</span>
              <% else %>
                <span class="px-2 py-1 bg-slate-700 text-slate-400 text-xs font-medium rounded">Disabled</span>
              <% end %>
            </div>
            
            <p class="text-slate-400 text-sm mb-4"><%= study.description %></p>
            
            <div class="flex gap-2">
              <%= link_to "Edit", edit_admin_case_study_path(study), class: "px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white text-sm font-medium rounded transition-colors" %>
              <%= button_to "Delete", admin_case_study_path(study), method: :delete, data: { confirm: "Are you sure?" }, class: "px-4 py-2 bg-red-900/20 hover:bg-red-900/30 text-red-400 text-sm font-medium rounded transition-colors" %>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="text-center py-12">
        <p class="text-slate-500">No case studies yet. Create your first one!</p>
      </div>
    <% end %>
  </div>
</div>
