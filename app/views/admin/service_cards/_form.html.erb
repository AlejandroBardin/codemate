<% content_for :title, @service_card.new_record? ? "New Service Card" : "Edit Service Card" %>

<div class="max-w-2xl mx-auto">
  <div class="mb-6">
    <h1 class="font-bold text-2xl text-white"><%= @service_card.new_record? ? "New" : "Edit" %> Service Card</h1>
  </div>

  <%= form_with model: @service_card, url: @service_card.new_record? ? admin_service_cards_path : admin_service_card_path(@service_card), class: "space-y-6" do |f| %>
    <% if @service_card.errors.any? %>
      <div class="bg-red-900/20 border border-red-900/30 text-red-400 px-4 py-3 rounded-lg">
        <h3 class="font-bold mb-2"><%= pluralize(@service_card.errors.count, "error") %> prohibited this service card from being saved:</h3>
        <ul class="list-disc list-inside text-sm">
          <% @service_card.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="bg-surface-dark rounded-xl border border-slate-700/50 p-6 space-y-4">
      <div>
        <%= f.label :title, class: "block text-sm font-medium text-slate-300 mb-2" %>
        <%= f.text_field :title, class: "w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary", placeholder: "e.g., n8n Automation" %>
      </div>

      <div>
        <%= f.label :description, class: "block text-sm font-medium text-slate-300 mb-2" %>
        <%= f.text_area :description, rows: 3, class: "w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary", placeholder: "Brief description of the service" %>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <%= f.label :position, class: "block text-sm font-medium text-slate-300 mb-2" %>
          <%= f.number_field :position, class: "w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary" %>
        </div>

        <div>
          <%= f.label :icon_color, class: "block text-sm font-medium text-slate-300 mb-2" %>
          <%= f.text_field :icon_color, class: "w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary", placeholder: "e.g., blue-400" %>
        </div>
      </div>

      <div>
        <%= f.label :svg_code, "SVG Code (optional)", class: "block text-sm font-medium text-slate-300 mb-2" %>
        <%= f.text_area :svg_code, rows: 4, class: "w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary font-mono text-sm", placeholder: "<svg>...</svg>" %>
        <p class="text-xs text-slate-500 mt-1">Paste SVG code for the icon (e.g., from n8n, Chatwoot logos)</p>
      </div>

      <div>
        <%= f.label :custom_icon, "OR Upload Custom Icon", class: "block text-sm font-medium text-slate-300 mb-2" %>
        <%= f.file_field :custom_icon, accept: "image/*", class: "w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-blue-600" %>
        <% if @service_card.custom_icon.attached? %>
          <div class="mt-2">
            <%= image_tag @service_card.custom_icon, class: "w-16 h-16 object-contain" %>
          </div>
        <% end %>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <%= f.label :link_text, class: "block text-sm font-medium text-slate-300 mb-2" %>
          <%= f.text_field :link_text, class: "w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary", placeholder: "Learn more" %>
        </div>

        <div>
          <%= f.label :link_url, class: "block text-sm font-medium text-slate-300 mb-2" %>
          <%= f.text_field :link_url, class: "w-full px-4 py-2.5 bg-slate-800 border border-slate-700 rounded-lg text-white placeholder-slate-500 focus:border-primary focus:ring-1 focus:ring-primary", placeholder: "#" %>
        </div>
      </div>

      <div class="flex items-center">
        <%= f.check_box :enabled, class: "w-4 h-4 text-primary bg-slate-800 border-slate-700 rounded focus:ring-primary" %>
        <%= f.label :enabled, "Enabled (show on homepage)", class: "ml-2 text-sm text-slate-300" %>
      </div>
    </div>

    <div class="flex gap-3">
      <%= f.submit @service_card.new_record? ? "Create Service Card" : "Update Service Card", class: "flex-1 px-6 py-3 bg-primary hover:bg-blue-600 text-white font-bold rounded-lg transition-colors cursor-pointer" %>
      <%= link_to "Cancel", admin_service_cards_path, class: "px-6 py-3 bg-slate-800 hover:bg-slate-700 text-white font-medium rounded-lg transition-colors" %>
    </div>
  <% end %>
</div>
